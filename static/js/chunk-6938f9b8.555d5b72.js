(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6938f9b8"],{5348:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"main"},[n("content-header",[n("a-button",{attrs:{slot:"right",icon:"arrow-left",type:"primary"},on:{click:function(a){return t.$router.go(-1)}},slot:"right"},[t._v("返回")])],1),n("div",{staticClass:"content"},[n("a-card",{staticClass:"infomation",attrs:{title:"基础信息"}},[n("p",{staticClass:"info"},[n("span",[t._v("主机名："+t._s(t.infomation.host_name))]),n("span",[t._v("IP地址："+t._s(t.infomation.host_address))]),n("span",[t._v("系统类型："+t._s(t.infomation.system_type))]),n("span",[t._v("协议类型："+t._s(t.infomation.protocol_type))])]),n("p",{staticClass:"info"},[n("span",[t._v("端口："+t._s(t.infomation.port))]),n("span",[t._v("系统用户："+t._s(t.infomation.login_name))]),n("span",[t._v("开始时间："+t._s(t.infomation.start_time))]),n("span")])]),n("a-card",{attrs:{title:"命令历史"}},[n("div",{staticClass:"search_box"},[n("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入关键字搜索",allowClear:""},on:{search:t.searchTable},model:{value:t.pagination.search_data,callback:function(a){t.$set(t.pagination,"search_data",a)},expression:"pagination.search_data"}},[n("a-select",{staticStyle:{width:"100px"},attrs:{slot:"addonBefore"},slot:"addonBefore",model:{value:t.pagination.search_type,callback:function(a){t.$set(t.pagination,"search_type",a)},expression:"pagination.search_type"}},t._l(t.searchList,(function(a){return n("a-select-option",{key:a.key},[t._v(t._s(a.name))])})),1)],1)],1),n("a-table",{attrs:{loading:t.tableLoading,columns:t.columns,"data-source":t.tableData},scopedSlots:t._u([{key:"action",fn:function(a,e){return[n("a",{on:{click:function(a){return t.remove(e)}}},[t._v("移除")])]}}])})],1)],1)],1)},o=[],i=(n("d81d"),n("d3b7"),n("b899")),s={data:function(){return{infomation:{},tableData:[],columns:[{title:"命令名称",dataIndex:"command"},{title:"开始时间",dataIndex:"create_time",width:200}],pagination:{total:0,current:1,pageSize:10,showTotal:function(t){return"共有 ".concat(t," 条数据")},search_type:"command",search_data:void 0,showSizeChanger:!0,showQuickJumper:!0},searchList:[{name:"命令名称",key:"command"}],tableLoading:!1}},mounted:function(){this.getSessionLogData(),this.getSessionHistoryData()},methods:{getSessionLogData:function(){var t=this;Object(i["f"])({id:this.$route.query.id}).then((function(a){200==a.code&&a.data&&(t.infomation=a.data)}))},getSessionHistoryData:function(){var t=this;this.tableLoading=!0;var a={session_log_id:this.$route.query.id};this.pagination.search_data&&(a.search_type=this.pagination.search_type,a.search_data=this.pagination.search_data),Object(i["e"])(a).then((function(a){200==a.code&&a.data?(a.data.map((function(t){t.key=t.id})),t.tableData=a.data):t.tableData=[]})).finally((function(){t.tableLoading=!1}))},searchTable:function(t){this.search_data=t,this.pagination.current=1,this.getSessionHistoryData()}}},r=s,c=(n("e3cc"),n("2877")),d=Object(c["a"])(r,e,o,!1,null,"f1c4ca3e",null);a["default"]=d.exports},a8c0:function(t,a,n){},b899:function(t,a,n){"use strict";n.d(a,"f",(function(){return o})),n.d(a,"b",(function(){return i})),n.d(a,"a",(function(){return s})),n.d(a,"g",(function(){return r})),n.d(a,"c",(function(){return c})),n.d(a,"d",(function(){return d})),n.d(a,"e",(function(){return u}));var e=n("b775"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["b"])({url:"session-log/",method:"get",params:t})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["b"])({url:"session-log/",method:"delete",data:t})},s=window.location.origin+window.API_ROOT+"api/bastion/v0_1/",r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s+"session-log/guacamole/"+"".concat(t,"/")},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["b"])({url:"command-log/",method:"get",params:t})},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["b"])({url:"operation-log/",method:"get",params:t})},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["b"])({url:"session-command-history/",method:"get",params:t})}},e3cc:function(t,a,n){"use strict";var e=n("a8c0"),o=n.n(e);o.a}}]);