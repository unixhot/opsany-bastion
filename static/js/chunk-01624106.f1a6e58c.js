(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01624106"],{"2fac":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{confirmLoading:t.btnLoading,width:"900px",title:"添加凭据"},on:{ok:t.onSubmit,cancel:t.onClose},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("a-transfer",{staticStyle:{margin:"20px 0 0 0"},attrs:{operations:t.operations,titles:t.titles,"list-style":t.listStyle,dataSource:t.mockData,targetKeys:t.targetKeys,"show-search":"",render:function(t){return t.title}},on:{change:t.handleChange}})],1)],1)},o=[],s=(n("d81d"),n("d3b7"),n("4246")),i=n("cb20"),r={data:function(){return{visible:!1,btnLoading:!1,resource_type:"host",mockData:[],targetKeys:[],allhostList:[],hostList:[],selectedhostList:[],allappList:[],appList:[],selectedappList:[],listStyle:{width:"330px",height:"420px"},titles:["可选择的主机资源","已选择的主机资源"],operations:["加入右侧","加入左侧"]}},mounted:function(){},methods:{show:function(t){this.visible=!0,this.getAllHost(),this.activeVoucher=t;var e=[];t.host_list.map((function(t){e.push(t.id+"")})),this.selectedhostList=e,this.targetKeys=this.selectedhostList},onSubmit:function(){var t=this;this.btnLoading=!0;var e=this.activeVoucher;"host"==this.resource_type?this.selectedhostList=this.targetKeys:this.selectedappList=this.targetKeys,e.host_list=this.selectedhostList,Object(i["c"])(e).then((function(e){200==e.code&&(t.$message.success(e.message),t.onClose())})).finally((function(){t.btnLoading=!1}))},onClose:function(){this.visible=!1,this.targetKeys=[],this.$emit("father"),this.selectedhostList=[],this.selectedappList=[]},getAllHost:function(){var t=this;Object(s["h"])({all_data:1}).then((function(e){if(200==e.code&&e.data){var n=[];e.data.map((function(t){n.push({key:t.id+"",title:t.host_name})})),t.allhostList=n,t.hostList=t.allhostList,t.mockData=t.hostList}}))},resourceTypeChange:function(){},handleChange:function(t,e,n){this.targetKeys=t}}},c=r,u=n("2877"),d=Object(u["a"])(c,a,o,!1,null,"07677d6d",null);e["a"]=d.exports},4246:function(t,e,n){"use strict";n.d(e,"h",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"i",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"j",(function(){return f})),n.d(e,"c",(function(){return b}));var a=n("b775"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host/",method:"get",params:t})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host/",method:"post",data:t})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host/",method:"put",data:t})},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host/",method:"delete",data:t})},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host-group/",method:"get",params:t})},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host-group/",method:"post",data:t})},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host-group/",method:"put",data:t})},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host-group/",method:"delete",data:t})},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"host-credential/",method:"delete",data:t})},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"auth-host/",method:"get",params:t})},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"check-import/",method:"post",data:t})}},"835e":function(t,e,n){},b15d:function(t,e,n){"use strict";var a=n("835e"),o=n.n(a);o.a},c96a7:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"passwordDetails_main"},[n("content-header",{ref:"contentHeader"},[n("a-button",{attrs:{slot:"right",icon:"arrow-left",type:"primary"},on:{click:function(e){return t.$router.go(-1)}},slot:"right"},[t._v("返回")])],1),n("div",{staticClass:"content"},[n("a-card",{staticClass:"infomation",attrs:{title:"基础信息"}},[n("p",{staticClass:"info"},[n("span",[t._v("凭证名称："+t._s(t.credentialInfo.name))]),n("span",[t._v("登录方式："+t._s("auto"==t.credentialInfo.login_type?"自动登录":"手动登录"))]),n("span",[t._v("资源账户: "+t._s(t.credentialInfo.login_name))])]),n("p",[t._v("描述："+t._s(t.credentialInfo.description||"--"))])]),n("a-tabs",{attrs:{type:"card"}},[n("a-tab-pane",{key:"1",attrs:{tab:"关联的主机"}}),t.$store.state.btnAuth.btnAuth.bastion_ssh_resource_create?n("a-button",{attrs:{slot:"tabBarExtraContent",type:"primary"},on:{click:function(e){return t.$refs.AssociatedResources.show(t.credentialInfo)}},slot:"tabBarExtraContent"},[t._v("关联资源")]):t._e()],1),n("a-table",{staticStyle:{padding:"20px"},attrs:{columns:t.columns,"data-source":t.tableData},scopedSlots:t._u([{key:"action",fn:function(e,a){return[t.$store.state.btnAuth.btnAuth.bastion_ssh_resource_delete?n("a",{on:{click:function(e){return t.remove(a)}}},[t._v("移除")]):t._e()]}}])})],1),n("AssociatedResources",{ref:"AssociatedResources",on:{father:function(e){return t.getCredentialData()}}})],1)},o=[],s=(n("d81d"),n("b0c0"),n("cb20")),i=n("4246"),r=n("2fac"),c={data:function(){return{tableData:[],columns:[{title:"主机名称",dataIndex:"host_name",scopedSlots:{customRender:"name"}},{title:"主机地址",dataIndex:"host_address"},{title:"系统类型",dataIndex:"system_type"},{title:"协议类型",dataIndex:"protocol_type"},{title:"操作",scopedSlots:{customRender:"action"}}],credentialInfo:{},hidden:!0}},mounted:function(){this.getCredentialData()},methods:{remove:function(t){var e=this;this.$confirm({title:"确认移除该资源吗？",onOk:function(){Object(i["k"])({credential:e.$route.query.id,host:t.id}).then((function(t){200==t.code&&(e.$message.success(t.message),e.getCredentialData())}))}})},getCredentialData:function(){var t=this;Object(s["d"])({id:this.$route.query.id}).then((function(e){t.credentialInfo=e.data,e.data.host_list.map((function(t){t.key=t.id})),t.hostList=e.data.host_list,t.tableData=t.hostList,t.$refs.contentHeader.mainTitle1=e.data.name}))}},components:{AssociatedResources:r["a"]}},u=c,d=(n("b15d"),n("2877")),l=Object(d["a"])(u,a,o,!1,null,"2c0479b0",null);e["default"]=l.exports},cb20:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r}));var a=n("b775"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"credential/",method:"get",params:t})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"credential/",method:"post",data:t})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"credential/",method:"put",data:t})},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["b"])({url:"credential/",method:"delete",data:t})}}}]);