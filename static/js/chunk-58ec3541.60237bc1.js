(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58ec3541"],{"0d49":function(e,t,a){},"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7");function n(e,t,a,n,i,r,s){try{var c=e[r](s),o=c.value}catch(u){return void a(u)}c.done?t(o):Promise.resolve(o).then(n,i)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(i,r){var s=e.apply(t,a);function c(e){n(s,i,r,c,o,"next",e)}function o(e){n(s,i,r,c,o,"throw",e)}c(void 0)}))}}},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("6b75");function i(e){if(Array.isArray(e))return Object(n["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var s=a("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return i(e)||r(e)||Object(s["a"])(e)||c()}},"3be4":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return u}));var n=a("b775"),i="access-strategy-v2/",r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:i,method:"get",params:e})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:i,method:"post",data:e})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:i,method:"put",data:e})},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:i,method:"delete",data:e})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"strategy-status/",method:"put",data:e})}},6421:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-tabs",{ref:"tabs",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,(function(e){return a("a-tab-pane",{key:e.key,attrs:{tab:e.name}})})),1),a("User",{directives:[{name:"show",rawName:"v-show",value:"User"==e.activeTab,expression:"activeTab == 'User'"}],ref:"User",attrs:{user_list:e.user_list}}),a("Group",{directives:[{name:"show",rawName:"v-show",value:"Group"==e.activeTab,expression:"activeTab == 'Group'"}],ref:"Group",attrs:{user_group_list:e.user_group_list}})],1)},i=[],r=(a("4160"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-transfer",{attrs:{dataSource:e.dataSource,targetKeys:e.targetKeys,selectedKeys:e.selectedKeys,showSearch:"",render:function(e){return e.title+"-"+e.description},"list-style":e.listStyle,operations:e.operations,titles:e.titles,lazy:!1},on:{change:e.handleChange,selectChange:e.handleSelectChange}})],1)}),s=[],c=(a("99af"),a("2909")),o=a("c24f"),u={props:{user_list:{type:Array,default:function(){return[]}}},watch:{user_list:{handler:function(e){this.targetKeys=e}}},data:function(){return{dataSource:void 0,titles:["可选择的用户","已选择的用户"],operations:["加入右侧","加入左侧"],targetKeys:[],selectedKeys:[],listStyle:{width:"370px",height:"420px"}}},methods:{getUserList:function(){var e=this,t={all_data:1};Object(o["c"])(t).then((function(t){t.data.forEach((function(t){e.$set(t,"key",t.id+""),e.$set(t,"title",t.username),e.$set(t,"description",t.ch_name)})),e.dataSource=t.data}))},handleChange:function(e){this.targetKeys=e},handleSelectChange:function(e,t){this.selectedKeys=[].concat(Object(c["a"])(e),Object(c["a"])(t))},resetData:function(){this.targetKeys=[],this.selectedKeys=[]},getFormData:function(){return this.targetKeys}},mounted:function(){this.getUserList()}},l=u,d=a("2877"),h=Object(d["a"])(l,r,s,!1,null,"137791e5",null),f=h.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-transfer",{attrs:{dataSource:e.dataSource,targetKeys:e.targetKeys,selectedKeys:e.selectedKeys,showSearch:"",render:function(e){return e.title+"-"+e.description},"list-style":e.listStyle,operations:e.operations,titles:e.titles,lazy:!1},on:{change:e.handleChange,selectChange:e.handleSelectChange}})],1)},v=[],y=(a("a4d3"),a("e01a"),a("b0c0"),{props:{user_group_list:{type:Array,default:function(){return[]}}},watch:{user_group_list:{handler:function(e){this.targetKeys=e}}},data:function(){return{dataSource:void 0,titles:["可选择的用户组","已选择的用户组"],operations:["加入右侧","加入左侧"],targetKeys:[],selectedKeys:[],listStyle:{width:"370px",height:"420px"}}},methods:{getUserGroupList:function(){var e=this,t={all_data:1};Object(o["a"])(t).then((function(t){t.data.forEach((function(t){e.$set(t,"key",t.id+""),e.$set(t,"title",t.name),t.description=t.description||""})),e.dataSource=t.data}))},handleChange:function(e){this.targetKeys=e},handleSelectChange:function(e,t){this.selectedKeys=[].concat(Object(c["a"])(e),Object(c["a"])(t))},resetData:function(){this.targetKeys=[],this.selectedKeys=[]},getFormData:function(){return this.targetKeys}},mounted:function(){this.getUserGroupList()}}),m=y,g=Object(d["a"])(m,p,v,!1,null,"d521e57e",null),_=g.exports,b={components:{User:f,Group:_},props:{user:{type:Object,default:function(){return{}}}},watch:{user:{handler:function(e){var t=this;this.user_list=e.user||[],this.user_group_list=e.user_group||[],this.user_list.forEach((function(e,a){t.user_list[a]=e+""})),this.user_group_list.forEach((function(e,a){t.user_group_list[a]=e+""}))}}},data:function(){return{tabList:[{key:"User",name:"关联用户"},{key:"Group",name:"关联用户组"}],activeTab:"User",user_list:[],user_group_list:[]}},methods:{resetFormData:function(){var e=this;this.activeTab=this.$options.data().activeTab,this.tabList.forEach((function(t){var a;null===(a=e.$refs[t.key])||void 0===a||a.resetData()}))},getFormData:function(){var e=this.$refs.User.getFormData(),t=this.$refs.Group.getFormData();return{user:e,user_group:t}}},mounted:function(){}},w=b,S=Object(d["a"])(w,n,i,!1,null,"6e65dfe0",null),k=S.exports;t["a"]=k},"6f7c":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("d3b7");var n=a("a18c"),i=a("b775"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["b"])({url:"authentication/",method:"get",params:e})},s=function(){n["a"].push({name:"noAuth"})},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(a,n){setTimeout((function(){e.$loading.show()}),0),r({action_id:t}).then((function(e){return e.data||s(),a(e.data)})).catch((function(){return s(),a(!1)})).finally((function(){setTimeout((function(){e.$loading.hide()}),0)}))}))}},"9e52":function(e,t,a){"use strict";var n=a("0d49"),i=a.n(n);i.a},cae8:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"boxhelp"},[a("div",[a("div",{staticClass:"allowBox"}),a("div",[e._v(e._s(e.allowText))])]),a("div",[a("div",{staticClass:"disabledBox",style:{background:e.disabledColor}}),a("div",[e._v(e._s(e.disabledText))])])]),e._l(e.weekList,(function(t){return a("div",{staticClass:"container"},[a("span",{staticClass:"week_name",on:{click:function(a){return e.clickWeek(t)}}},[e._v(e._s(t.name))]),e._l(24,(function(n,i){return a("span",{staticClass:"timebox",style:{background:t.activeTime.includes(i)?"#0ba360":e.disabledColor},on:{click:function(a){return e.clickTimeBox(t,i)}}})})),a("a-select",{attrs:{mode:"multiple",hidden:""},model:{value:t.activeTime,callback:function(a){e.$set(t,"activeTime",a)},expression:"week.activeTime"}},e._l(24,(function(t,n){return a("a-select-option",{key:n,attrs:{value:n}},[e._v(" "+e._s(n)+" ")])})),1)],2)})),a("div",{staticClass:"timecountbox"},e._l(24,(function(t,n){return a("span",{staticClass:"timecount",on:{click:function(t){return e.clickTime(n)}}},[e._v(" "+e._s(n)+" ")])})),0),a("div",[a("a-button",{attrs:{type:"link"},on:{click:e.allCheck}},[e._v("全选")])],1)],2)},i=[],r=(a("a623"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("a630"),a("caad"),a("d81d"),a("a434"),a("2532"),a("3ca3"),a("159b"),{props:{value:{type:Array,default:function(){return[]}},disabledColor:{type:String,default:"#ffffff"},allowText:{type:String,default:"允许"},disabledText:{type:String,default:"禁止"}},model:{prop:"value",event:"change"},methods:{clickTimeBox:function(e,t){if(e.activeTime.includes(t)){var a=e.activeTime.findIndex((function(e){return e==t}));e.activeTime.splice(a,1)}else e.activeTime.push(t);this.emitWeekList()},allCheck:function(){var e=this.weekList.every((function(e){return 24==e.activeTime.length}));this.weekList.forEach((function(t){t.activeTime=e?[]:Array.from({length:24},(function(e,t){return t}))})),this.emitWeekList()},clickWeek:function(e){var t=24==e.activeTime.length?[]:Array.from({length:24},(function(e,t){return t}));this.$set(e,"activeTime",t),this.emitWeekList()},clickTime:function(e){var t=this.weekList.map((function(t){return t.activeTime.find((function(t){return t==e}))})).filter((function(e){return void 0!=e})),a=t.length==this.weekList.length;a?(this.weekList.forEach((function(t){var a=t.activeTime.findIndex((function(t){return t==e}));t.activeTime.splice(a,1)})),this.emitWeekList()):(this.weekList.forEach((function(t){!t.activeTime.includes(e)&&t.activeTime.push(e),t.activeTime.sort((function(e,t){return e-t}))})),this.emitWeekList())},emitWeekList:function(){var e=this.weekList.map((function(e){return{week:e.key,time:e.activeTime.sort((function(e,t){return e-t}))}}));this.$emit("change",e)}},computed:{weekList:function(){var e=[{key:1,name:"周一",activeTime:[]},{key:2,name:"周二",activeTime:[]},{key:3,name:"周三",activeTime:[]},{key:4,name:"周四",activeTime:[]},{key:5,name:"周五",activeTime:[]},{key:6,name:"周六",activeTime:[]},{key:7,name:"周日",activeTime:[]}];return this.value.forEach((function(t){var a=e.find((function(e){return e.key==t.week}));a.activeTime=t.time})),e}},mounted:function(){}}),s=r,c=(a("9e52"),a("2877")),o=Object(c["a"])(s,n,i,!1,null,"22c117d5",null),u=o.exports;t["a"]=u},d816:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-tabs",{ref:"tabs",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,(function(e){return a("a-tab-pane",{key:e.key,attrs:{tab:e.name}})})),1),a("PasswordVoucher",{directives:[{name:"show",rawName:"v-show",value:"PasswordVoucher"==e.activeTab,expression:"activeTab == 'PasswordVoucher'"}],ref:"PasswordVoucher",attrs:{password_credential_host_id:e.password_credential_host_id}}),a("SSHKey",{directives:[{name:"show",rawName:"v-show",value:"SSHKey"==e.activeTab,expression:"activeTab == 'SSHKey'"}],ref:"SSHKey",attrs:{ssh_credential_host_id:e.ssh_credential_host_id}}),a("VoucherGroup",{directives:[{name:"show",rawName:"v-show",value:"VoucherGroup"==e.activeTab,expression:"activeTab == 'VoucherGroup'"}],ref:"VoucherGroup",attrs:{credential_group:e.credential_group}})],1)},i=[],r=(a("4160"),a("d81d"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-transfer",{attrs:{dataSource:e.dataSource,targetKeys:e.targetKeys,selectedKeys:e.selectedKeys,showSearch:"",render:function(e){return e.title},"list-style":e.listStyle,operations:e.operations,titles:e.titles,lazy:!1},on:{change:e.handleChange,selectChange:e.handleSelectChange}})],1)}),s=[],c=(a("a4d3"),a("e01a"),a("99af"),a("2909")),o=a("5412"),u={props:{password_credential_host_id:{type:Array,default:function(){return[]}}},watch:{password_credential_host_id:{handler:function(e){this.targetKeys=e}}},data:function(){return{dataSource:void 0,titles:["可选择的密码凭证","已选择的密码凭证"],operations:["加入右侧","加入左侧"],targetKeys:[],selectedKeys:[],listStyle:{width:"370px",height:"420px"}}},methods:{getResourceCredential:function(){var e=this,t={data_type:"password"};Object(o["a"])(t).then((function(t){t.data.forEach((function(t){e.$set(t,"key",t.id+""),e.$set(t,"title",t.login_name+"@"+t.host_address+"("+t.credential_name+")"),t.description=t.description||""})),e.dataSource=t.data}))},handleChange:function(e){this.targetKeys=e},handleSelectChange:function(e,t){this.selectedKeys=[].concat(Object(c["a"])(e),Object(c["a"])(t))},resetData:function(){this.targetKeys=[],this.selectedKeys=[]},getFormData:function(){return this.targetKeys}},mounted:function(){this.getResourceCredential()}},l=u,d=a("2877"),h=Object(d["a"])(l,r,s,!1,null,"19d35812",null),f=h.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-transfer",{attrs:{dataSource:e.dataSource,targetKeys:e.targetKeys,selectedKeys:e.selectedKeys,showSearch:"",render:function(e){return e.title},"list-style":e.listStyle,operations:e.operations,titles:e.titles,lazy:!1},on:{change:e.handleChange,selectChange:e.handleSelectChange}})],1)},v=[],y={props:{ssh_credential_host_id:{type:Array,default:function(){return[]}}},watch:{ssh_credential_host_id:{handler:function(e){this.targetKeys=e}}},data:function(){return{dataSource:void 0,titles:["可选择的SSH密钥","已选择的SSH密钥"],operations:["加入右侧","加入左侧"],targetKeys:[],selectedKeys:[],listStyle:{width:"370px",height:"420px"}}},methods:{getResourceCredential:function(){var e=this,t={data_type:"ssh"};Object(o["a"])(t).then((function(t){t.data.forEach((function(t){e.$set(t,"key",t.id+""),e.$set(t,"title",t.login_name+"@"+t.host_address+"("+t.credential_name+")"),t.description=t.description||""})),e.dataSource=t.data}))},handleChange:function(e){this.targetKeys=e},handleSelectChange:function(e,t){this.selectedKeys=[].concat(Object(c["a"])(e),Object(c["a"])(t))},resetData:function(){this.targetKeys=[],this.selectedKeys=[]},getFormData:function(){return this.targetKeys}},mounted:function(){this.getResourceCredential()}},m=y,g=Object(d["a"])(m,p,v,!1,null,"19c7ac73",null),_=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-transfer",{attrs:{dataSource:e.dataSource,targetKeys:e.targetKeys,selectedKeys:e.selectedKeys,showSearch:"",render:function(e){return e.title},"list-style":e.listStyle,operations:e.operations,titles:e.titles,lazy:!1},on:{change:e.handleChange,selectChange:e.handleSelectChange}})],1)},w=[],S=(a("b0c0"),{props:{credential_group:{type:Array,default:function(){return[]}}},watch:{credential_group:{handler:function(e){this.targetKeys=e}}},data:function(){return{dataSource:void 0,titles:["可选择的凭证分组","已选择的凭证分组"],operations:["加入右侧","加入左侧"],targetKeys:[],selectedKeys:[],listStyle:{width:"370px",height:"420px"}}},methods:{getResourceCredential:function(){var e=this,t={data_type:"group"};Object(o["a"])(t).then((function(t){t.data.forEach((function(t){e.$set(t,"key",t.id+""),e.$set(t,"title",t.name),t.description=t.description||""})),e.dataSource=t.data}))},handleChange:function(e){this.targetKeys=e},handleSelectChange:function(e,t){this.selectedKeys=[].concat(Object(c["a"])(e),Object(c["a"])(t))},resetData:function(){this.targetKeys=[],this.selectedKeys=[]},getFormData:function(){return this.targetKeys}},mounted:function(){this.getResourceCredential()}}),k=S,K=Object(d["a"])(k,b,w,!1,null,"787505be",null),T=K.exports,C={components:{PasswordVoucher:f,SSHKey:_,VoucherGroup:T},props:{credential_host:{type:Object,default:function(){return{}}}},watch:{credential_host:{handler:function(e){var t=e.password_credential_host_id||[],a=e.ssh_credential_host_id||[],n=e.credential_group||[];this.password_credential_host_id=t.map((function(e){return e.id+""})),this.ssh_credential_host_id=a.map((function(e){return e.id+""})),this.credential_group=n.map((function(e){return e.id+""}))}}},data:function(){return{tabList:[{key:"PasswordVoucher",name:"关联密码凭证"},{key:"SSHKey",name:"关联SSH密钥"},{key:"VoucherGroup",name:"关联凭证分组"}],activeTab:"PasswordVoucher",password_credential_host_id:[],ssh_credential_host_id:[],credential_group:[]}},methods:{resetFormData:function(){var e=this;this.activeTab=this.$options.data().activeTab,this.tabList.forEach((function(t){var a;null===(a=e.$refs[t.key])||void 0===a||a.resetData()}))},getFormData:function(){var e=this.$refs.PasswordVoucher.getFormData(),t=this.$refs.SSHKey.getFormData(),a=this.$refs.VoucherGroup.getFormData();return{password_credential_host_id:e,ssh_credential_host_id:t,credential_group:a}}},mounted:function(){}},x=C,j=Object(d["a"])(x,n,i,!1,null,"4b5ce629",null),O=j.exports;t["a"]=O}}]);